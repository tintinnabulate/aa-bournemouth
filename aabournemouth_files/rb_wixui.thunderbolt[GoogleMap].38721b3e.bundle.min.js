!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("rb_wixui.thunderbolt[GoogleMap]",["react"],t):"object"==typeof exports?exports["rb_wixui.thunderbolt[GoogleMap]"]=t(require("react")):e["rb_wixui.thunderbolt[GoogleMap]"]=t(e.React)}("undefined"!=typeof self?self:this,(function(e){return function(){var t={5329:function(t){"use strict";t.exports=e},448:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="https://static.parastorage.com/services/editor-elements-library/dist/thunderbolt/";var r={};return function(){"use strict";o.r(r),o.d(r,{components:function(){return $}});var e=o(448),t=o.n(e),n=o(5329);function a(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}var s=function(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(o&&(o+=" "),o+=t);return o};const i=()=>"undefined"!=typeof window,l=e=>Object.entries(e).reduce(((e,[t,n])=>(t.includes("data-")&&(e[t]=n),e)),{});const u="wixui-",c=(e,...t)=>{const n=[];return e&&n.push(`${u}${e}`),t.forEach((e=>{e&&(n.push(`${u}${e}`),n.push(e))})),n.join(" ")};const d=e=>e.replace(/([A-Z])/g,(e=>`-${e.toLowerCase()}`)),p=(((e,t,n=[])=>{e.reduce(((e,t)=>({...e,[t]:!0})),{}),n.length})(["isSocialElementsBlocked"],(e=>{let{isSocialElementsBlocked:t}=e;return t?"WithConsentWrapper":void 0})),e=>({consentPolicy:e.currentConsentPolicy,openSettingModal:()=>e.openSettingModal([])}));var f={root:"google-map"};function g(){const e=n.useRef([]);return[n.useCallback((()=>new Promise((t=>e.current.push(t)))),[]),n.useCallback((t=>{e.current.forEach((e=>e(t))),e.current.length=0}),[])]}const m=(e,t)=>{if(e||t)return t?{path:e,fillColor:t,strokeColor:t,fillOpacity:1,scale:.5}:(e=>{if(e&&e.endsWith(".webp"))try{const t=e.match(/media\/[^/]+/)[0].split(".")[1];e=e.replace(/.webp$/,"."+t)}catch(e){}return e})(e)},v=(e,t)=>e.map((e=>({...e,icon:m(e.pinIcon,e.pinColor)||t&&m(t.pinIcon,null==t?void 0:t.pinColor)})));var y="load",h="message",M="SET_INITIAL_LOCATIONS",E="SET_CENTER",S="CENTER_UPDATED",w="SET_ZOOM",b="ZOOM_UPDATED",C="MARKER_CLICKED",O="MAP_CLICKED",_="GET_MARKERS",L="MARKERS",k="FIT_BOUNDS",N="MAP_IDLE",I="OPEN_INFO_WINDOW",x="TILES_LOADED",R="SET_MARKER_ICON",D="SET_MARKER_ICON_FINISHED",P="SET_DIRECTION";const j=["iw","ar","ur","fa"];function T(e,t,o){let{mapData:r,language:a,isEditorMode:s}=t,{onUpdateZoom:l,onUpdateCenter:u,onMarkerClicked:c,onMapClicked:d}=o;const p=(0,n.useRef)([]),f=(0,n.useRef)(null),m=(0,n.useMemo)((()=>{var e,t,n,o;return void 0!==r.defaultLocation?{pinIcon:null!=(e=null==(t=r.locations[r.defaultLocation])?void 0:t.pinIcon)?e:"",pinColor:null!=(n=null==(o=r.locations[r.defaultLocation])?void 0:o.pinColor)?n:""}:void 0}),[r.defaultLocation,r.locations]),[T,A]=g(),[F,G]=g(),[U,W]=g(),[J,K]=g(),[B,Z]=g(),[$,q]=g(),[H,Q]=g(),[z,V]=(0,n.useState)(!1),X=(e,t)=>{const n=f.current;return v(n||e,t)},Y=(0,n.useMemo)((()=>({...r,locations:X(r.locations,m)})),[r,m]),ee=function(e,t){void 0===t&&(t=null);const o=(0,n.useRef)(t);return(0,n.useEffect)((()=>{o.current=e}),[e]),o.current}(Y),te={[S]:e=>null==u?void 0:u(e),[b]:e=>null==l?void 0:l({zoom:e}),[C]:e=>null==c?void 0:c({type:"markerClicked",...e}),[O]:e=>{let{longitude:t,latitude:n,...o}=e;return null==d?void 0:d({type:"mapClicked",location:{longitude:t,latitude:n},...o})},[L]:e=>A(e),[N]:()=>{const e=p.current.shift();null==e||e()},[x]:()=>{z||V(!0)},[D]:()=>Q()},ne={[y]:e=>{let{_sendMessage:t}=e;t({type:M,data:JSON.stringify({...r,locations:X(r.locations)})},{forceSend:!0}),t({type:P,data:JSON.stringify({direction:j.includes(a)?"rtl":"ltr"})})},[h]:e=>{let{event:t}=e;if("string"==typeof t.payload){var n;const{type:e,data:o}=JSON.parse(t.payload);null==(n=te[e])||n.call(te,o)}}},[oe,re]=function(e){let{reducer:t=(()=>({})),iframeLoaded:o}=e;const r=(0,n.useRef)([]),a=(0,n.useRef)(void 0),s=(0,n.useRef)(void 0),l=(0,n.useRef)(void 0),u=(0,n.useCallback)(((e,t)=>{if(a.current&&o||null!=t&&t.forceSend){var n;const t=null==(n=a.current)?void 0:n.contentWindow;return void(null==t||t.postMessage(e,"*"))}if(!a.current||!s.current||!1===o)return void r.current.push(e);const i=a.current.contentWindow;null==i||i.postMessage(e,"*")}),[o]),c=(0,n.useCallback)((()=>{0!==r.current.length&&!1!==o&&(r.current.forEach((e=>u(e))),r.current=[])}),[u,o]),d=(0,n.useCallback)((e=>{if(l.current&&(l.current(),l.current=void 0),!e)return;const n=()=>{s.current=!0,c(),t({type:"load"},u)};e.addEventListener("load",n),a.current=e,l.current=()=>{e.removeEventListener("load",n)}}),[t,u,c]);return(0,n.useEffect)((()=>{o&&c()}),[o,c]),(0,n.useEffect)((()=>{if(!i())return;const e=e=>{var n;e.source&&e.source!==(null==(n=a.current)?void 0:n.contentWindow)||t({type:"message",payload:e.data},u)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[t,u]),[d,u]}({reducer:(e,t)=>{var n;return null==(n=ne[e.type])?void 0:n.call(ne,{event:e,_sendMessage:t})},iframeLoaded:z});return(0,n.useImperativeHandle)(e,(()=>({setMapCenter:(e,t)=>{const n=F();return re({type:E,data:JSON.stringify({longitude:e,latitude:t})}),p.current.push(G),n},fitBounds:e=>{let{north:t,east:n,west:o,south:r}=e;const a=J();return re({type:k,data:JSON.stringify({north:t,east:n,west:o,south:r})}),p.current.push(K),a},setMarkerIcon:e=>{let{locations:t,coordinates:n,iconOptions:o}=e;const r=H();return f.current=t,re({type:R,data:JSON.stringify({...n,iconOptions:o})}),r},setMapZoom:e=>{const t=U();return re({type:w,data:e}),p.current.push(W),t},getVisibleMarkers:()=>{const e=T();return re({type:_}),e},openInfoWindow:e=>{if(!Y.showDirectionsLink){const t=$();return re({type:I,data:JSON.stringify({locationIndex:e})}),p.current.push(q),t}return new Promise((e=>e()))},setMarkers:(e,t)=>{const n=B();return f.current=e,re(JSON.stringify({...Y,locations:v(e,m),openInfoWindow:null==t?void 0:t.openInfoWindow})),p.current.push(Z),n}}))),(0,n.useEffect)((()=>{if(!z||!s)return;const e=!!ee&&(t=Y.locations,n=ee.locations,t.length===n.length&&t.every(((e,t)=>{const o=Object.keys(e);return o.length===Object.keys(n[t]).length&&o.every((o=>"locationLinkAttributes"===o||e[o]===n[t][o]))})));var t,n;re(JSON.stringify({...Y,locations:X(Y.locations,m),shouldKeepMarkers:e}))}),[Y,re,m,z,ee,s]),[oe]}var A={GoogleMapSkin:"c36GfP",googleMapSkin:"c36GfP",mapContainer:"gwyB6z",GoogleMapDefault:"qFjBwF",googleMapDefault:"qFjBwF",GoogleMapSloppy:"D_LINF",googleMapSloppy:"D_LINF",brd:"J8D75x",one:"KH6hFC",two:"Czan88",GoogleMapLiftedShadow:"sp0Pug",googleMapLiftedShadow:"sp0Pug",shd:"gDJxCg",left:"H78pyp",right:"QvNeFb"};const F={GoogleMapLiftedShadow:()=>n.createElement(n.Fragment,null,n.createElement("div",{className:s(A.left,A.shd)}),n.createElement("div",{className:s(A.right,A.shd)})),GoogleMapSloppy:()=>n.createElement(n.Fragment,null,n.createElement("div",{className:s(A.brd,A.one)}),n.createElement("div",{className:s(A.brd,A.two)})),GoogleMapSkin:()=>n.createElement(n.Fragment,null),GoogleMapDefault:()=>n.createElement(n.Fragment,null)};var G=o.p+"media/googleMap.ea5928de.html",U=o.p+"media/google-map.min.c5cac041.js";const W=e=>e.replace("https://static.parastorage.com/services/","https://editor.wix.com/_partials/"),J=(e,o)=>{const{id:r,className:a,customClassNames:u=[],skin:d,urlQueries:p,mapData:g,translations:m,isConsentPolicyActive:v,onUpdateCenter:y,onUpdateZoom:h,onMarkerClicked:M,onMapClicked:E,onMouseEnter:S,onMouseLeave:w,isDesignerMode:b,isEditorMode:C,language:O}=e,_=F[d],L=((e,t)=>{const n=t?W(U):U,o=new URLSearchParams({googleMapsScriptPath:new URL(n).pathname});return i()&&o.append("origin",window.origin),(t?W(G):G)+"?"+e+"&"+o})(p,b),[k,N]=n.useState(!1),[I]=T(o,{mapData:g,isEditorMode:C,language:O},{onUpdateCenter:y,onUpdateZoom:h,onMarkerClicked:M,onMapClicked:E});n.useEffect((()=>{N(!0)}),[L]);const x=m.title,R=((e,t)=>e?{}:t)(v,{id:r,className:s(A[d],A.wixIframe,a,c(f.root,...u)),...l(e)});return n.createElement("div",t()({},R,{tabIndex:0}),k&&n.createElement("wix-iframe",{title:x,"aria-label":x,"data-src":L},n.createElement(_,null),n.createElement("div",{id:"mapContainer_"+r,onMouseEnter:S,onMouseLeave:w,className:A.mapContainer},n.createElement("iframe",{ref:I,title:x,"aria-label":x,"data-src":L,width:"100%",height:"100%",frameBorder:"0",scrolling:"no",allowFullScreen:!0}))))};const K=["pt-br","da","de","en","es","fr","it","ja","ko","nl","no","pl","pt","ru","sv","tr"],B=e=>K.includes(e)?e:"en";var Z;const $={GoogleMap:{component:n.forwardRef(J),controller:(Z=e=>{let{stateValues:t,mapperProps:n}=e;const{dataLanguage:o,propsLanguage:r,siteLanguage:a,urlQueries:s}=n;let i;var l,u;i=!0===(l=t.experiments)[u="specs.thunderbolt.fixGoogleMapLanguage"]||"true"===l[u]||"new"===l[u]?B(a):((e,t,n)=>e||B("userLang"===t?n:t))(o,r,a);const c=new URLSearchParams(s);return c.set("language",i),{...n,language:i,urlQueries:c.toString(),...p(t)}},{useComponentProps:(e,t,n)=>{const o=(e=>({...e,updateStyles:t=>{const n=Object.entries(t).reduce(((e,[t,n])=>{return{...e,[(o=t,o.startsWith("--")?t:d(t))]:void 0===n?null:n};var o}),{});e.updateStyles(n)}}))(n);return Z({mapperProps:e,stateValues:t,controllerUtils:o})}})}}}(),r}()}));
//# sourceMappingURL=https://static.parastorage.com/services/editor-elements-library/dist/thunderbolt/rb_wixui.thunderbolt[GoogleMap].38721b3e.bundle.min.js.map